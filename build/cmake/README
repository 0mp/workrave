This document gives some hints on how to compile Workrave on Windows
using Microsoft Visual Studio (2008 Express Edition).

The minimal requirement is gtkmm, Directx SDK and cmake.

Only networking is currently not easy to build on Windows.


Install Gtkmm (required)
========================

- Download and install gtkmm:

  File: ftp://ftp.gnome.org/pub/GNOME/binaries/win32/gtkmm/2.16/gtkmm-win32-devel-2.16.0-4.exe


Install DirectX SDK (required)
=============================

- Download and install DirectX 9 SDK:

  Site: http://msdn.microsoft.com/en-us/directx/default.aspx


Install CMake 2.6 (required)
============================

- Download and install cmake:

  Website: http://www.cmake.org
  
  File: http://www.cmake.org/files/v2.6/cmake-2.6.4-win32-x86.exe

 
Install Intltool (recommended, needed for exercises)
====================================================

- Download and Install Strawberry Perl
  ActiveState may also work (untested)

  Website: http://strawberryperl.com/
  
  File: http://strawberry-perl.googlecode.com/files/strawberry-perl-5.10.0.6.msi

- Download and extract intltool

  File: http://ftp.gnome.org/pub/gnome/binaries/win32/intltool/0.40/intltool_0.40.4-1_win32.zip

  Extract to <PATH-TO-DEPEDENCIES>.

  
Install Gettext (recommended, needed for localization and exercises)
====================================================================

- Download and extract Gettext

  File: http://ftp.gnome.org/pub/GNOME/binaries/win32/dependencies/gettext-tools-0.17.zip

  Note: You may run into problems (access denied and such) if you
  extract the files with unzip from cygwin; use Windows built-in zip
  support.

  
Install Python/Cheetah (optional/experimental, needed for dbus)
===============================================================

- Download and Install Python 2.5.2 

  Install the x86 version, even on a 64bit systems. setuptool will not install otherwise.

  Website: http://www.python.org/download/
  
  File: http://www.python.org/ftp/python/2.6.2/python-2.6.2.msi     
  File: http://www.python.org/ftp/python/2.6.2/python-2.6.2.amd64.msi

- Download and install setuptools

  Website: http://pypi.python.org/pypi/setuptools
  File:  http://pypi.python.org/packages/source/s/setuptools/setuptools-0.6c9.tar.gz

  - Extract setuptools-0.6c9.tar.gz to directory outside the Windows Python installation directory
  - Open Command Prompt windows and go to the directory where you extracted setuptools.
  - Make sure C:\Python26 is in your PATH
  - Run 'python setup.py install' 
  
- Install Cheetah

  - Open a Command Prompt (Use Run as Administrator on Vista)
  - cd C:\Python26\Scripts [replace python installation directory]
  - Run 'easy_install-2.6-script.py'


Install DBus (optional/experimental, needed for dbus)
=====================================================

- Download and extract libiconv

  File: http://ftp.gnome.org/pub/GNOME/binaries/win32/dependencies/libiconv-1.9.1.bin.woe32.zip

  Extract to <PATH-TO-DEPEDENCIES>.
  
- Download, compile and install DBUS:

  - svn co https://windbus.svn.sourceforge.net/svnroot/windbus/trunk windbus
  - mkdir windbus-build
  - cd windbus-build
  - Run cmake

    cmake -G "Visual Studio 9 2008" ../windbus/cmake/ -DCMAKE_PREFIX_PATH="<PATH-TO-DEPEDENCIES>;<PATH-TO-GTKMM>"
          -DCMAKE_INSTALL_PREFIX=<PATH-TO-DEPEDENCIES>

    e.g.
    
    cmake -G "Visual Studio 9 2008" ../windbus/cmake/ -DCMAKE_PREFIX_PATH="c:/mystuff/devel;C:/Program Files (x86)/gtkmm"
          -DCMAKE_INSTALL_PREFIX=c:/mystuff/devel

  - Open dbus solution in visual studio (location in windbus-build directory)
  - Select Release configuration
  - From Build menu, choose rebuild solution
  - Right click on INSTALL project, choose build
  - Select Debug configuration
  - From Build menu, choose rebuild solution
  - Right click on INSTALL project, choose build
  
Compiling Workrave
==================

 - Download workrave
 
 - mkdir workrave-build
 - cd workrave-build

 - cmake -G "Visual Studio 9 2008" <PATH-TO-WORKRAVE-SOURCES>/build/cmake/
                 -DDEVELOPMENT_MODE=ON 
                 -DCMAKE_PREFIX_PATH="PATH-TO-DEPEDENCIES" -DCMAKE_INSTALL_PREFIX="<INSTALL-DIRECTORY>

    Note: PATH-TO-DEPEDENCIES should contains all dependencies: gettext, dbus, intltool etc.

    eg. cmake -G "Visual Studio 9 2008" ../workrave/build/cmake/ -DDEVELOPMENT_MODE=ON
              -DCMAKE_PREFIX_PATH=c:/mystuff/devel -DCMAKE_INSTALL_PREFIX=c:/mystuff/programs/workrave

  - Open Workrave solution in visual studio (location in workrave-build directory)
  - Build

  
